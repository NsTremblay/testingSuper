<div class="container" style="padding-bottom:10px">
	<div class="tabbable tabs-left">
		<ul class="nav nav-tabs">
			<li class="active"><a href="#virAmrStrainSelect" data-toggle="tab">Select VIR/AMR/Strain</a></li>
			<li id="virInfoLink"><a href="#virInfo" data-toggle="tab">Virulence Factor Info</a></li>
			<li id="amrInfoLink"><a href="#amrInfo" data-toggle="tab">AMR Info</a></li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane active" id="virAmrStrainSelect">
				<div class="tabbable">
					<ul class="nav nav-tabs">
						<li class="active"><a href="#virSelect" data-toggle="tab">Select Virulence Factors</a></li>
						<li><a href="#amrSelect" data-toggle="tab">Select AMR genes</a></li>
						<li><a href="#strainSelect" data-toggle="tab">Select Strains</a></li>
					</ul>
					<div class="tab-content">
						<div id="virSelect" class="span9 tab-pane active" style="border:solid;border-width:1px;border-color:#d3d3d3;max-height:400px;overflow:auto">
							<form id="strainListForm" class="form" action="/virulence_amr_by_strain/" method="post" enctype="application/x-www-form-urlencoded">
								<div style="padding:10px">
									<fieldset>
										<span class="help-block">Select on one or more virulence factors</span>
										<ul id="strainListSelection" style="padding:0px;margin:0px">
											<TMPL_LOOP NAME=vFACTORS>
											<li style="list-style:none">
												<label class="checkbox">
													<input id="checkboxName" class="checkbox" type="checkbox" value='<TMPL_VAR NAME=FEATUREID>' name="selectedVirulence"><TMPL_VAR NAME=NAME> - <TMPL_VAR NAME=UNIQUENAME></input>
												</label>
											</li>
											</TMPL_LOOP>
										</ul>
									</fieldset>								
								</div>
							</div>
							<div id="amrSelect" class="span9 tab-pane" style="border:solid;border-width:1px;border-color:#d3d3d3;max-height:400px;overflow:auto">
								<div style="padding:10px">
									<fieldset>
										<span class="help-block">Select on one or more amr genes</span>
										<ul id="strainListSelection" style="padding:0px;margin:0px">
											<TMPL_LOOP NAME=amrFACTORS>
											<li style="list-style:none">
												<label class="checkbox">
													<input id="checkboxName" class="checkbox" type="checkbox" value='<TMPL_VAR NAME=FEATUREID>' name="selectedAmr"><TMPL_VAR NAME=NAME> - <TMPL_VAR NAME=UNIQUENAME></input>
												</label>
											</li>
											</TMPL_LOOP>
										</ul>
									</fieldset>
								</div>
							</div>
							<div id="strainSelect" class="span9 tab-pane" style="border:solid;border-width:1px;border-color:#d3d3d3;max-height:400px;overflow:auto">
								<div style="padding:10px">
									<fieldset>
										<span class="help-block">Select on one or more strains</span>
										<ul id="pubStrainList" style="padding:0px;margin:0px">
											<TMPL_LOOP NAME=FEATURES>
											<li style="list-style:none">
												<label class="checkbox">
													<input id="checkboxName" class="checkbox" type="checkbox" value='<TMPL_VAR NAME=FEATURE_ID>' name="selectedStrains"><TMPL_VAR NAME=UNIQUENAME></input>
												</label>
											</li>
											</TMPL_LOOP>
										</ul>
									</fieldset>
								</form>
							</div>
						</div>

						<div class="span6" style="margin:20px 10px 0px 0px">
							<button id="compareSelections" class="btn btn-primary span3" type="button"><i class="icon-th icon-white"></i> Compared Selections</button>
						</div>

						<div class="row-fluid" style="max-height:500px;overflow:auto;margin:20px 0px 0px 0px">
							<table class="table table-striped table-condensed">
								<thead>
									<td></td>
									<TMPL_LOOP NAME=STRAINTABLENAMES>
									<td><TMPL_VAR NAME=strain_name></td>
									</TMPL_LOOP>
								</thead>
								<tbody>
									<TMPL_LOOP NAME=vFACTORSBYSTRAIN>
									<tr>
										<td><TMPL_VAR NAME=gene_name></td>
										<TMPL_LOOP NAME=presence_absence><td><TMPL_VAR NAME=value></td></TMPL_LOOP>
									</tr>
									</TMPL_LOOP>
								</tbody>
							</table>
						</div>

						<div class="row-fluid" style="max-height:500px;overflow:auto;margin:20px 0px 0px 0px">
							<table class="table table-striped table-condensed">
								<thead>
									<td></td>
									<TMPL_LOOP NAME=STRAINTABLENAMES>
									<td><TMPL_VAR NAME=strain_name>aaaa</td>
									</TMPL_LOOP>
								</thead>
								<tbody>
									<TMPL_LOOP NAME=amrFACTORSBYSTRAIN>
									<tr>
										<td><TMPL_VAR NAME=gene_name>aaaa</td>
										<TMPL_LOOP NAME=presence_absence><td><TMPL_VAR NAME=value></td></TMPL_LOOP>
									</tr>
									</TMPL_LOOP>
								</tbody>
							</table>
						</div>

					</div>
				</div>
			</div>
			<div class="tab-pane" id="virInfo">
				<div class="row-fluid">
					<div class="span5" style="padding:10px 0px 0px 0px">
						<p> Here you will find information about all virluence factors in the database. This is mostly to provide general
							biological information about each virulence factor.
						</p>
						<hr/>
						<form class="form" id="showVFMetaInfoForm" action="/vf_meta_info" method="post" enctype="application/x-www-form-urlencoded">
							<fieldset>
								<h5>Select a VF from the list:</h5>
								<select id="vfList" class="span12" name="VFName">
									<TMPL_LOOP NAME=vFACTORS>
									<option value='<TMPL_VAR NAME=FEATUREID>'><TMPL_VAR NAME=NAME> - <TMPL_VAR NAME=UNIQUENAME></option>
									</TMPL_LOOP>
								</select>
								<div style="margin:10px 0px 0px 0px">
									<button id="showVFMetaInfo" type="button" class="btn btn-small btn-primary" value="Submit"><i class="icon-info-sign icon-white"></i> Virulence Factor Meta Info</button>
									<button type="reset" class="btn btn-small btn-danger" name="cancel" value="Cancel"><i class="icon-remove icon-white"></i> Cancel</button>
								</div>
							</fieldset>
						</form>
					</div>
					<div class="span5">
						<div class="row-fluid">
							<div id="VFMetaInfo" style="display:none">
								<h5><u>Virulence Factor Meta Info</u></h5>
							</div>
							<div id="vfvalidator" style="display:none"><TMPL_VAR NAME=vfVALIDATOR></div>
						</div>
					</div>
				</div>
			</div>
			<div class="tab-pane" id="amrInfo">
				<div class="row-fluid">
					<div class="span5" style="padding:10px 0px 0px 0px">
						<p> Here you will find information about all AMR factors in the database. This is mostly to provide general biological information about each AMR factor.
						</p>
						<hr/>
						<form class="form" action="/virulence_factors/" method="post" enctype="application/x-www-form-urlencoded">
							<fieldset>
								<h5>Select an AMR gene from the list:</h5>
								<select class="span12" name="AMRName">
									<TMPL_LOOP NAME=amrFACTORS>
									<option value='<TMPL_VAR NAME=FEATUREID>'><TMPL_VAR NAME=NAME> - <TMPL_VAR NAME=UNIQUENAME></option>
									</TMPL_LOOP>
								</select>
								<div style="margin:10px 0px 0px 0px">
									<button id="showAMRMetaInfo" type="submit" class="btn btn-small btn-primary" value="Submit"><i class="icon-info-sign icon-white"></i> AMR Factor Meta Info</button>
									<button type="reset" class="btn btn-small btn-danger" name="cancel" value="Cancel"><i class="icon-remove icon-white"></i> Cancel</button>
								</div>
							</fieldset>
						</form>
					</div>
					<div class="span5">
						<div class="row-fluid">
							<div id="AMRMetaInfo" style="display:none">
								<h5><u>Antimicrobial Resistance Gene Meta Info</u></h5>
								<TMPL_LOOP NAME=amrMETAINFO>
								<TMPL_VAR NAME=amrUNIQUENAME>
								<strong><TMPL_VAR NAME=amrTERMNAME></strong> : <TMPL_VAR NAME=amrTERMVALUE> <br>
								</TMPL_LOOP>
							</div>
							<div id="amrvalidator" style="display:none"><TMPL_VAR NAME=amrVALIDATOR></div>
						</div>
					</div>
				</div>

			</div>
		</div>
	</div>
</div>


<script type="text/javascript">

$('#compareSelections').click( function() {
	compareSelections();
});

function compareSelections() {
	$('#strainListForm').submit();
}

$(showVFMetaInfo).click( function(e){
	$('#VFMetaInfo').empty();
	$('#VFMetaInfo').append('<div class="span5" id="wheel-loader" style="margin:80px 0px 0px 20px"><small><em><img src="/App/Pictures/wheel-loader.gif"> Loading Info...</em></small></div>');
	e.preventDefault();
	$.post("/vf_meta_info", $("#showVFMetaInfoForm").serialize(),  
		function(data){
			$('#VFMetaInfo').empty();
			$('#VFMetaInfo').append('<h5><u>Virulence Factor Meta Info</u></h5>');
			for (var i = 0; i < data.data.length; i++) {
				$('#VFMetaInfo').append('<strong>' + data.data[i].term_name + '</strong>: ' + data.data[i].value + '</br>');
			}
		}, "json" , $('#VFMetaInfo').show());
});

</script>
