	
<!DOCTYPE html>
<html>

<TMPL_INCLUDE NAME="header.tmpl">

<script src="/App/Styling/js/jquery-1.9.1.js"></script>
<script src="/App/Styling/js/jquery-ui-1.10.1.js"></script>
<link rel="stylesheet" href="/App/Styling/css/jquery-ui-1.10.1.css">


<TMPL_INCLUDE NAME="nav_bar.tmpl">

<body onload="onLoadCheck()" style="background-color:#796e6c">
	<div class="container" style="background-color:#FFFFFF">

		<div style="margin:10px 10px 10px 10px;padding:10px 10px 10px 10px">
			<h1>Group Wise Comparisons</h1>
		</div>

		<div>
			<TMPL_INCLUDE NAME="group_wise_comparison_form.tmpl">
		</div>

		<span class="help-block" style="padding:10px">Soon you will be able to select groups of strains from the map or the phylogenetic tree, but they are both shown here for reference as to what the site will look like</span>
		<div id="multiStrain" class="container" style="background-color:#FFFFFF;min-height:560px;margin-top:5px">
			<div class="row-fluid">
				<div id="svgCanvas" class="span6" style="padding:5px">
					<TMPL_INCLUDE NAME="phylogeny_multi_strain.tmpl">
				</div>
				<div class="span6" id="map_canvas" style="height:500px;padding:5px"></div>
			</div>
		</div>
		
		<div id="groupWiseComparisonDiv" style="display:none;margin:10px 0px 10px 0px">

			<div class="row-fluid">
				<h4 style="margin:10px">Binary Data</h5>
					<div class="span5" style="margin:10px;height:300px;overflow:auto">
						<table class="table table-striped table-condensed">
							<thead>Group 1</thead>
							<tr>
								<th>Locus Name</th>
								<th>Strains Present</th>
								<th>Strains Absent</th>
								<th>p-value</th>
							</tr>
							<TMPL_LOOP NAME=GROUP1BINARYDATA>
							<tr><td><TMPL_VAR NAME=locusname>
								<td><a id="strainsPresent" title="Strains: <TMPL_LOOP NAME=present><a><TMPL_VAR NAME=strain></a> </TMPL_LOOP>"><TMPL_VAR NAME=present_count></a></td>
								<td><a id ="strainsAbsent" title="Strains: <TMPL_LOOP NAME=absent><a><TMPL_VAR NAME=strain></a> </TMPL_LOOP>"><TMPL_VAR NAME=absent_count></a></td>
								<td>< 0.001</td>
							</td></tr></TMPL_LOOP>
						</table>
					</div>

					<div class="span5 pull-right" style="margin:10px;height:300px;overflow:auto">
						<table class="table table-striped table-condensed">
							<thead>Group 2</thead>
							<tr>
								<th>Locus Name</th>
								<th>Strains Present</th>
								<th>Strains Absent</th>
								<th>p-value</th>
							</tr>
							<TMPL_LOOP NAME=GROUP2BINARYDATA>
							<tr><td><TMPL_VAR NAME=locusname>
								<td><a id="strainsPresent" title="Strains: <TMPL_LOOP NAME=present><a><TMPL_VAR NAME=strain></a> </TMPL_LOOP>"><TMPL_VAR NAME=present_count></a></td>
								<td><a id ="strainsAbsent" title="Strains: <TMPL_LOOP NAME=absent><a><TMPL_VAR NAME=strain></a> </TMPL_LOOP>"><TMPL_VAR NAME=absent_count></a></td>
								<td>< 0.001</td>
							</td></tr></TMPL_LOOP>
						</table>
					</div>

				</div>

				<div class="row-fluid">
					<h4 style="margin:10px">SNP Data</h5>
						<div class="span5" style="margin:10px;height:300px;overflow:auto">
							<table class="table table-striped table-condensed">
								<thead>Group 1</thead>
								<tr>
									<th>Locus Name</th>
									<th>A</th>
									<th>T</th>
									<th>C</th>
									<th>G</th>
									<th>p-value</th>
								</tr>
								<TMPL_LOOP NAME=GROUP1SNPDATA>
								<tr><td><TMPL_VAR NAME=locusname>
									<td><a id="adeninePresent" title="Strains: <TMPL_LOOP NAME=adenine><TMPL_VAR NAME=strain> </TMPL_LOOP>"><TMPL_VAR NAME=adenine_count></a></td>
									<td><a id="thymidinePresent" title="Strains: <TMPL_LOOP NAME=thymidine><TMPL_VAR NAME=strain> </TMPL_LOOP>"><TMPL_VAR NAME=thymidine_count></a></td>
									<td><a id="cytosinePresent" title="Strains: <TMPL_LOOP NAME=cytosine><TMPL_VAR NAME=strain> </TMPL_LOOP>"><TMPL_VAR NAME=cytosine_count></a></td>
									<td><a id="guaninePresent" title="Strains: <TMPL_LOOP NAME=guanine><TMPL_VAR NAME=strain> </TMPL_LOOP>"><TMPL_VAR NAME=guanine_count></a></td>
									<td>< 0.001</td>
								</td></tr></TMPL_LOOP>
							</table>
						</div>

						<div class="span5 pull-right" style="margin:10px;height:300px;overflow:auto">
							<table class="table table-striped table-condensed">
								<thead>Group 2</thead>
								<tr>
									<th>Locus Name</th>
									<th>A</th>
									<th>T</th>
									<th>C</th>
									<th>G</th>
									<th>p-value</th>
								</tr>
								<TMPL_LOOP NAME=GROUP2SNPDATA>
								<tr><td><TMPL_VAR NAME=locusname>
									<td><a id="adeninePresent" title="Strains: <TMPL_LOOP NAME=adenine><TMPL_VAR NAME=strain> </TMPL_LOOP>"><TMPL_VAR NAME=adenine_count></a></td>
									<td><a id="thymidinePresent" title="Strains: <TMPL_LOOP NAME=thymidine><TMPL_VAR NAME=strain> </TMPL_LOOP>"><TMPL_VAR NAME=thymidine_count></a></td>
									<td><a id="cytosinePresent" title="Strains: <TMPL_LOOP NAME=cytosine><TMPL_VAR NAME=strain> </TMPL_LOOP>"><TMPL_VAR NAME=cytosine_count></a></td>
									<td><a id="guaninePresent" title="Strains: <TMPL_LOOP NAME=guanine><TMPL_VAR NAME=strain> </TMPL_LOOP>"><TMPL_VAR NAME=guanine_count></a></td>
									<td>< 0.001</td>
								</td></tr></TMPL_LOOP>
							</table>
						</div>
					</div>

				</div>

			</div>

			<div id="validator" style="display:none"><TMPL_VAR NAME=VALIDATOR></div>

		</body>

		<TMPL_INCLUDE NAME="footer.tmpl">

		<script>
		$(function (){
			$.widget("ui.tooltip" , $.ui.tooltip, {
				options: {
					content: function () {
						return $(this).prop('title')
					}
				}
			});
			$('a').tooltip();
		});

		var strainJson = <TMPL_VAR NAME=strainJSONData>;

		$('#uniqueNameView').click(function () {
			$('#strainListSelection').empty();
			$('#group1').empty();
			$('#buttonRemoveGroup1').hide();
			$('#group2').empty();
			$('#buttonRemoveGroup2').hide();

			for (i=0 ; i<strainJson.data.length ; i++) {
				var li = document.createElement("li");
				var label = document.createElement("label");
				var description = document.createTextNode(strainJson.data[i].uniquename);
				var checkbox = document.createElement("input");

				li.setAttribute("style","list-style:none");

				label.className = "checkbox";

				checkbox.type = "checkbox";
				checkbox.id = "checkboxName";
				checkbox.name = "multiStrainNames";
				checkbox.value = strainJson.data[i].uniquename;
				
				label.appendChild(checkbox);
				label.appendChild(description);
				li.appendChild(label);

				document.getElementById('strainListSelection').appendChild(li);
			}
		});

		$('#commonNameView').click(function () {
			$('#strainListSelection').empty();
			$('#group1').empty();
			$('#buttonRemoveGroup1').hide();
			$('#group2').empty();
			$('#buttonRemoveGroup2').hide();

			for (i=0 ; i<strainJson.data.length ; i++) {
				var li = document.createElement("li");
				var label = document.createElement("label");
				var description = document.createTextNode(strainJson.data[i].feature_id);
				var checkbox = document.createElement("input");

				li.setAttribute("style","list-style:none");

				label.className = "checkbox";

				checkbox.type = "checkbox";
				checkbox.id = "checkboxName";
				checkbox.name = "multiStrainNames";
				checkbox.value = strainJson.data[i].uniquename;
				
				label.appendChild(checkbox);
				label.appendChild(description);
				li.appendChild(label);

				document.getElementById('strainListSelection').appendChild(li);
			}
		});

	</script>

	</html>