<!DOCTYPE html>
<html>

<head>
	<link rel="stylesheet" href="/App/Styling/css/genodo_tree.css">
	<link rel="stylesheet" href="/App/Styling/css/jquery-ui-1.10.3.custom.css">
	<script src="/App/Styling/js/jquery-1.9.1.js"></script>
	<script src="/App/Styling/js/jquery-ui-1.10.3.custom.js"></script>
	<script src="/App/Styling/js/d3.v3/d3.v3.min.js"></script>
	<link media="screen" href="/App/Styling/css/bootstrap.css" type="text/css" rel="stylesheet">
	<link media="screen" href="/App/Styling/css/bootstrap-responsive.css" type="text/css" rel="stylesheet">
	
	<script>
		var public_genomes = <TMPL_VAR public_genomes>;
		var private_genomes = <TMPL_VAR private_genomes>;
	</script>
	<script>
		$(function() {
			$( "#dialog-genome-select" ).dialog({
				autoOpen: false,
				resizable: false,
				height:180,
				modal: true,
				buttons: {
					"Submit": function() {
						var form = $('<form action="/strain_info/" method="post">' +
						  '<input type="text" name="genome" value="' + $( this ).data('genome') + '" />' +
						  '</form>');
						$( 'body' ).append(form);
						$( form ).submit();
				},
				Cancel: function() {
					$( this ).dialog( "close" );
					}
				}
			});
		});
	</script>
	
</head>

<TMPL_INCLUDE NAME="nav_bar_strain_info.tmpl">

<body style="background-color:#796e6c">

	<div class="container" style="background-color:#FFFFFF">

		<div class="row-fluid" style="margin:10px 10px 10px 10px; padding:10px 10px 10px 10px">
			<h1><span>ADVANCED</span> <span style="color:#d41616">SEARCH</span></h1>
			<p>Retrieve genome information by selecting a genome from a phylogenetic tree, world map or by searching against the genome attributes.</p>
		</div>

		<div class="row-fluid">
		<div class="span12">
		<ul id="strain_search_tabs" class="nav nav-tabs">
			<li class="active"><a href="#phylo_search_tab" data-toggle="tab">Phylogenetic Tree</a></li>
			<li><a href="#map_search_tab" data-toggle="tab">Map</a></li>
			<li><a href="#meta_search_tab" data-toggle="tab">Genome Attributes</a></li>
		</ul>

		<div class="tab-content">
			
			<div class="tab-pane active" id="phylo_search_tab">
				<div style="margin: 10px 10px 10px 10px;">
					<div class="span12">
						<p >Select a genome by clicking on a node in the phylogenetic tree.  
						</p>
						<div id="dialog-genome-select" title="Retrieve selected genome?">
							<p>Would you like to retrieve genome information for this selected genome?</p>
						</div>
					</div>
					<div class="span7">
						<form class="form-horizontal" style="padding: 10px; margin: 40px 10px 10px 10px">
					    <fieldset>
					    	<div class="control-group">
					    	<label class="control-label">Select data displayed in phylogenetic tree:</label>
					    	<div class="controls">
							    <label class="checkbox inline">
							    <input type="checkbox" name="view_options" value="name"> Name
							    </label>
							    <label class="checkbox inline">
							    <input type="checkbox" name="view_options" value="accession"> Accession #
							    </label>
							    <label class="checkbox inline">
							    <input type="checkbox" name="view_options" value="strain"> Strain
							    </label>
							    <label class="checkbox inline">
							    <input type="checkbox" name="view_options" value="serotype"> Serotype
							    </label>
							    <label class="checkbox inline">
							    <input type="checkbox" name="view_options" value="isolation_host"> Isolation Host
							    </label>
							    <label class="checkbox inline">
							    <input type="checkbox" name="view_options" value="isolation_source"> Isolation Source
							    </label>
							    <label class="checkbox inline">
							    <input type="checkbox" name="view_options" value="isolation_date"> Isolation Date
							    </label>
							</div>
							</div>											    	
						    <button id="update_view" class="btn">Update</button>					   						    
					    </fieldset>
					    </form>
					</div>
					<div class="span4" id="legend" style="padding: 10px;">
						<p>Phylogenetic tree functions</p>
						<script src="/App/Styling/js/genodo_tree_functions.js"></script>
						<script type="text/javascript">
							legend();
						</script>
					</div>
						
				</div>
				
				<div id="vis" class="span12">
					<script src="/App/Styling/js/genodo_tree_functions.js"></script>
					<script src="/App/Styling/js/genodo_single_strain_tree_zoom.js"></script>
					<script type="text/javascript">
						
						root = <TMPL_VAR tree_json>;
						root.x0 = height / 2;
    					root.y0 = 0;
						update(root);
					</script>
				</div>
			</div>
			
			<div class="tab-pane" id="map_search_tab">
				<div>
					Tab 2
				</div>
			</div>
			
			<div class="tab-pane" id="meta_search_tab">
				<div>
					Tab 3
				</div>
			</div>

		</div>
		</div>
		</div>
		
	</div>

</body>

<TMPL_INCLUDE NAME="footer.tmpl">

</html>
