<div style="margin:10px 10px 10px 10px;padding:10px 10px 0px 10px;border-style:solid;border-width:1px;border-color:#d3d3d3">

	<script src="/App/Styling/js/jquery-1.9.1.js"></script>
	<script src="/App/Styling/js/jquery-ui-1.10.1.js"></script>
	<link rel="stylesheet" href="/App/Styling/css/jquery-ui-1.10.1.css">

	<form id="genomeUploadForm" class="form" action="/home/dispatch.cgi/upload_genome/" method="post" enctype="multipart/form-data">
		<fieldset class="form-inline">
			<input id="attachFile" class="input" type="file" name="genomeFile" required></input>
			<span class="help-inline">Ensure that files are <i>FASTA</i> format</span>
			<div class="progress progress-striped active">
				<div class="bar" style="width:100%;display:none">Please wait while your sequence is being uploaded. This may take a while...</div>
			</div>
			<!--button type="button" class="btn btn-small btn-primary" name="attach_file" value="Attach file"><i class="icon-folder-open icon-white"></i> Attach file</button-->
		</fieldset>

		<fieldset class="form-horizontal">
			<span class="help-block" style="margin:10px"> The following fields are required:</span>
			<div class="control-group">
				<label class="control-label" for="inputGenomeName">Genome Name</label>
				<div class="controls">
					<input type="text" name="genomeName" id="inputGenomeName" required>
				</div>
			</div>
			<div class="control-group">
				<label class="control-label" for="inputAliasName">Alias Name</label>
				<div class="controls">
					<input type="text" name="aliasName" id="inputAliasName" required>
				</div>
			</div>
			<div class="control-group">
				<label class="control-label" for="inputIsolationDate">Date of Isolation</label>
				<div class="controls">
					<input type="text" name="isolationDate" id="inputIsolationDate" placeholder="DD/MM/YYYY" required>
				</div>
			</div>
			<div class="control-group">
				<label class="control-label" for="inputHostSource">Isolation Host Source</label>
				<div class="controls">
					<input type="text" name="hostSource" id="inputHostSource" required>
				</div>
			</div>
			<div class="control-group">
				<label class="control-label" for="inputIsolationLocation">Location of Isolation</label>
				<div class="controls">
					<input type="text" name="isolationLocation" id="inputIsolationLocation" required>
				</div>
			</div>
			<div class="control-group">
				<label class="control-label" for="inputSpeciesName">Species Name</label>
				<div class="controls">
					<input type="text" name="speciesName" id="inputSpeciesName" value="Escherichia coli" readonly="true" placeholder="Escherichia coli" required>
				</div>
			</div>
			<div class="control-group">
				<label class="control-label" for="inputSerotype">Serotype</label>
				<div class="controls">
					<input type="text" name="serotype" id="inputSerotype" required>
				</div>
			</div>
			<div class="control-group">
				<label class="control-label" for="inputPublic inputPrivate inputPrivateUntil">Privacy Settings</label>
				<div class="controls">
					<label class="radio">
						<input type="radio" name="inputPrivacy" value="public" id="inputPublic" required checked>
						Public
					</label>
				</div>
				<div class="controls">
					<label class="radio">
						<input type="radio" name="inputPrivacy" value="private" id="inputPrivate" required>
						Private
					</label>
				</div>
				<div class="controls">
					<label class="radio">
						<input type="radio" name="inputPrivacy" id="inputPrivateUntil" value="privateUntil">
						Private Until
						<input type="text" name="inputPrivateUntilDate" id="inputPrivateUntilText" disabled placeholder="DD/MM/YYYY">
					</label>
				</div>
			</div>
		</fieldset>

		<fieldset class="form-horizontal" id="additionalFields">
		</fieldset>

		<hr/>

		<fieldset class="form-inline">
			<span class="help-block" style="margin:10px"> The following fields are optional:</span>
			<div style="margin-top:10px">
				<select id="extraList">
					<option name="description">Description</option>
					<option name="finished">Finished</option>
					<option name="keywords">Keywords</option>
					<option name="mol_type">Molecular Type</option>
					<option name="owner">Owner</option>
					<option name="problem">Problem</option>
					<option name="score">Score</option>
					<option name="status">Status</option>
					<option name="symbol">Symbol</option>
				</select>
				<button class="btn" type="button" style="margin:0px 20px 0px 20px" onclick="addField()"><i class="icon-plus"></i></button>
			</div>
		</fieldset>
		<hr/>
		<button id="submitGenome" type="button" class="btn btn-small btn-success"><i class="icon-upload icon-white"></i> Submit</button>
		<button type="reset" class="btn btn-small btn-danger" name="cancel" value="Cancel" onclick="reload()"><i class="icon-remove icon-white"></i> Clear Form</button>
	</form>

</div>

<script>
$('#inputPrivateUntil').click( function() {
	$('#inputPrivateUntilText').attr("disabled", false);
	$('#inputPrivateUntilText').attr("required", true);
	$('#inputPrivateUntilText').focus();
});
$('#inputPublic').click( function() {
	$('#inputPrivateUntilText').attr("disabled", true);
	$('#inputPrivateUntilText').attr("required", false);
});
$('#inputPrivate').click( function() {
	$('#inputPrivateUntilText').attr("disabled", true);
	$('#inputPrivateUntilText').attr("required", false);
});
$('#submitGenome').click( function() {
	var emptyInput = 0;
	$('input[required]').each( function() {
		if (!$(this).val()){
			emptyInput++;
			//alert('You must fill in the required fields');
		}
		else {
		}
	});
	if (emptyInput > 0) {
		alert('You must fill in the required fields');
	}
	else{
		$('.bar').show();
		$('#genomeUploadForm').submit();
	}
});
</script>

<script type="text/javascript">
function addField() {
	var attrName = $('#extraList option:selected').attr('name');
	if (attrName == "description"){
		$('<div class="control-group"><label class="control-label" for="inputDescription">Description</label><div class="controls"><input type="text" id="inputDescription" name="description"></div></div>').appendTo('#additionalFields');
		$('#extraList option:selected').remove();
	}
	else if (attrName == "finished"){
		$('<div class="control-group"><label class="control-label" for="inputFinished">Finished</label><div class="controls"><input type="text" id="inputFinished" name="finished"></div></div>').appendTo('#additionalFields');
		$('#extraList option:selected').remove();
	}
	else if (attrName == "keywords"){
		$('<div class="control-group"><label class="control-label" for="inputKeywords">Keywords</label><div class="controls"><input type="text" id="inputKeywords" name="keywords"><span class="help-inline">Separate keywords with a "<strong>,</strong>" (comma).</span></div></div>').appendTo('#additionalFields');
		$('#extraList option:selected').remove();
	}
	else if (attrName == "mol_type"){
		$('<div class="control-group"><label class="control-label" for="inputMolType">MolecularType</label><div class="controls"><label class="radio"><input type="radio" name="inputMolType" input="inputMolType" value="dna" checked>DNA</label><label class="radio"><input type="radio" name="inputMolType" input="inputMolType" value="plasmid">Plasmid</label></div></div>').appendTo('#additionalFields');
		$('#extraList option:selected').remove();
	}
	else if (attrName == "owner"){
		$('<div class="control-group"><label class="control-label" for="inputOwner">Owner</label><div class="controls"><input type="text" id="inputOwner" name="owner"></div></div>').appendTo('#additionalFields');
		$('#extraList option:selected').remove();
	}
	else if (attrName == "problem"){
		$('<div class="control-group"><label class="control-label" for="inputProblem">Problem</label><div class="controls"><input type="text" id="inputProblem" name="problem"></div></div>').appendTo('#additionalFields');
		$('#extraList option:selected').remove();
	}
	else if (attrName == "score"){
		$('<div class="control-group"><label class="control-label" for="inputScore">Score</label><div class="controls"><input type="text" id="inputScore" name="score"></div></div>').appendTo('#additionalFields');
		$('#extraList option:selected').remove();
	}
	else if (attrName == "status"){
		$('<div class="control-group"><label class="control-label" for="inputStatus">Status</label><div class="controls"><input type="text" id="inputStatus" name="status"></div></div>').appendTo('#additionalFields');
		$('#extraList option:selected').remove();
	}
	else if (attrName == "symbol"){
		$('<div class="control-group"><label class="control-label" for="inputSymbol">Symbol</label><div class="controls"><input type="text" id="inputSymbol" name="symbol"></div></div>').appendTo('#additionalFields');
		$('#extraList option:selected').remove();
	}
}

function reload() {
	location.reload();
}
</script>